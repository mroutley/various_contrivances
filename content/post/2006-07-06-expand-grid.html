---
title: expand-grid
author: Matthew Routley
date: '2006-07-06'
slug: expand-grid
categories:
  - code
tags: []
---



<p>Hereâ€™s a simple trick for creating experimental designs in R: use the function expand.grid.</p>
<p>A simple example is:</p>
<pre class="r"><code>treatments &lt;- LETTERS[1:4]
levels &lt;- 1:3
experiment &lt;- data.frame(expand.grid(treatment=treatments, 
                                     level=levels))</code></pre>
<p>which produces:</p>
<pre class="r"><code>treatment level
1          A     1
2          B     1
3          C     1
4          D     1
5          A     2
6          B     2
7          C     2
8          D     2
9          A     3
10         B     3
11         C     3
12         D     3</code></pre>
<p>Now, if you want to randomize your experimental treatments, try:</p>
<pre class="r"><code>experiment[sample(dim(experiment)[1]), ]</code></pre>
<p><code>sample</code> randomly chooses numbers from a vector the same length as the <code>experiment</code> data frame without replacement. The square brackets then use this random sample to subsample from the <code>experiment</code> data frame.</p>
